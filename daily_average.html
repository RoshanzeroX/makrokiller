<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏à‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
    </head>
<body>
    <div class="background"></div>
    <div class="content-wrapper fade-slide-in">
        <main>
            <h1>üí∞ ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏à‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h1>

            <div class="info-card">
                <h2>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô (‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì)</h2>
                <p>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ SKU ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô: <span id="targetSku">0</span></p>
                <p>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ MU ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô: <span id="targetMu">0</span></p>
            </div>

            <div class="info-card">
                <h2>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
                <div class="input-group">
                    <label for="currentSku">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô SKU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß:</label>
                    <input type="number" id="currentSku" placeholder="‡∏Å‡∏£‡∏≠‡∏Å SKU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß" value="0">
                </div>
                <div class="progress-bar-container">
                    <div id="skuProgressBar" class="progress-bar">0%</div>
                </div>

                <div class="input-group" style="margin-top: 1.5em;">
                    <label for="currentMu">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô MU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß:</label>
                    <input type="number" id="currentMu" placeholder="‡∏Å‡∏£‡∏≠‡∏Å MU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß" value="0">
                </div>
                <div class="progress-bar-container">
                    <div id="muProgressBar" class="progress-bar">0%</div>
                </div>
            </div>

            <div class="buttons-group">
                <button id="clearDataButton" class="clear-button">üóëÔ∏è ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
        </main>
        </div>

    <button id="homeButton" class="floating-button left" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">üè†</button>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const urlParams = new URLSearchParams(window.location.search);
            const totalSku = parseFloat(urlParams.get('sku')) || 0;
            const totalMu = parseFloat(urlParams.get('mu')) || 0;
            const days = parseFloat(urlParams.get('days')) || 1;

            const dailyTargetSku = (totalSku / days).toFixed(0);
            const dailyTargetMu = (totalMu / days).toFixed(0);

            const targetSkuDisplay = document.getElementById('targetSku');
            const targetMuDisplay = document.getElementById('targetMu');
            const currentSkuInput = document.getElementById('currentSku');
            const currentMuInput = document.getElementById('currentMu');
            const skuProgressBar = document.getElementById('skuProgressBar');
            const muProgressBar = document.getElementById('muProgressBar');
            const clearDataButton = document.getElementById('clearDataButton');
            const homeButton = document.getElementById('homeButton'); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ö‡πâ‡∏≤‡∏ô

            targetSkuDisplay.textContent = dailyTargetSku;
            targetMuDisplay.textContent = dailyTargetMu;

            const savedCurrentSku = localStorage.getItem('dailySku');
            const savedCurrentMu = localStorage.getItem('dailyMu');
            if (savedCurrentSku) {
                currentSkuInput.value = savedCurrentSku;
            }
            if (savedCurrentMu) {
                currentMuInput.value = savedCurrentMu;
            }

            function updateProgress() {
                const currentSku = parseFloat(currentSkuInput.value) || 0;
                const currentMu = parseFloat(currentMuInput.value) || 0;

                const targetSkuNum = parseFloat(dailyTargetSku);
                const targetMuNum = parseFloat(dailyTargetMu);

                let skuPercentage = 0;
                if (targetSkuNum > 0) {
                    skuPercentage = Math.min(100, (currentSku / targetSkuNum) * 100);
                }
                skuProgressBar.style.width = skuPercentage + '%';
                skuProgressBar.textContent = skuPercentage.toFixed(0) + '%';
                skuProgressBar.style.backgroundColor = getProgressBarColor(skuPercentage);

                let muPercentage = 0;
                if (targetMuNum > 0) {
                    muPercentage = Math.min(100, (currentMu / targetMuNum) * 100);
                }
                muProgressBar.style.width = muPercentage + '%';
                muProgressBar.textContent = muPercentage.toFixed(0) + '%';
                muProgressBar.style.backgroundColor = getProgressBarColor(muPercentage);

                localStorage.setItem('dailySku', currentSku);
                localStorage.setItem('dailyMu', currentMu);
            }

            function getProgressBarColor(percentage) {
                if (percentage >= 100) {
                    return '#28a745'; // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏° ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö 100%
                } else if (percentage >= 75) {
                    return '#ffc107'; // ‡∏™‡πâ‡∏° ‡πÄ‡∏°‡∏∑‡πà‡∏≠ 75% ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ
                } else {
                    return '#007bff'; // ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                }
            }

            currentSkuInput.addEventListener('input', updateProgress);
            currentMuInput.addEventListener('input', updateProgress);

            clearDataButton.addEventListener('click', () => {
                currentSkuInput.value = 0;
                currentMuInput.value = 0;
                localStorage.removeItem('dailySku');
                localStorage.removeItem('dailyMu');
                updateProgress();
            });

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ö‡πâ‡∏≤‡∏ô
            homeButton.addEventListener('click', () => {
                window.location.href = "index.html";
            });

            updateProgress();
        });
    </script>
</body>
</html>
