<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏à‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background"></div>
    <div class="content-wrapper fade-slide-in">
        <main>
            <h1>üìà ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏à‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h1>

            <div class="info-card">
                <h2>üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h2>
                <p>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ SKU ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô: <span id="targetSku">0</span></p>
                <p>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ MU ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô: <span id="targetMu">0</span></p>
            </div>

            <div class="info-card">
                <h2>üìä ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
                <div class="input-group">
                    <input type="number" id="currentSku" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô SKU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß">
                </div>
                <div class="progress-bar-container">
                    <div id="skuProgressBar" class="progress-bar">0%</div>
                </div>

                <div class="input-group">
                    <input type="number" id="currentMu" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô MU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß">
                </div>
                <div class="progress-bar-container">
                    <div id="muProgressBar" class="progress-bar">0%</div>
                </div>
            </div>

            <div class="buttons-group">
                <button id="clearDataButton" class="clear-button">üóëÔ∏è ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>
        </main>
    </div>

    <button id="homeButton" class="floating-button" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">üè†</button>
    <button id="duckButton" class="floating-button" aria-label="‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏î">ü¶Ü</button>
    <button id="fullscreenButton" class="floating-button" aria-label="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠">üì±</button>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const urlParams = new URLSearchParams(window.location.search);
            const targetSku = parseFloat(urlParams.get('skuDaily')) || 0;
            const targetMu = parseFloat(urlParams.get('muDaily')) || 0;

            const targetSkuDisplay = document.getElementById('targetSku');
            const targetMuDisplay = document.getElementById('targetMu');
            const currentSkuInput = document.getElementById('currentSku');
            const currentMuInput = document.getElementById('currentMu');
            const skuProgressBar = document.getElementById('skuProgressBar');
            const muProgressBar = document.getElementById('muProgressBar');
            const clearDataButton = document.getElementById('clearDataButton');

            // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
            targetSkuDisplay.textContent = targetSku.toFixed(0);
            targetMuDisplay.textContent = targetMu.toFixed(0);

            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Local Storage
            const savedSku = localStorage.getItem('dailySku');
            const savedMu = localStorage.getItem('dailyMu');
            
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô null ‡∏´‡∏£‡∏∑‡∏≠ '0' ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ placeholder ‡∏õ‡∏£‡∏≤‡∏Å‡∏è
            // ‡∏°‡∏¥‡∏â‡∏∞‡∏ô‡∏±‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤
            currentSkuInput.value = (savedSku === null || savedSku === '0') ? '' : savedSku;
            currentMuInput.value = (savedMu === null || savedMu === '0') ? '' : savedMu;

            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
            function updateProgress() {
                // ‡πÉ‡∏ä‡πâ parseFloat ‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô input ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡∏ñ‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏Å‡πá‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô 0
                const currentSku = parseFloat(currentSkuInput.value) || 0;
                const currentMu = parseFloat(currentMuInput.value) || 0;

                const targetSkuNum = targetSku;
                const targetMuNum = targetMu;

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå SKU
                let skuPercentage = 0;
                if (targetSkuNum > 0) {
                    skuPercentage = Math.min(100, (currentSku / targetSkuNum) * 100);
                }
                skuProgressBar.style.width = skuPercentage + '%';
                skuProgressBar.textContent = skuPercentage.toFixed(0) + '%';
                skuProgressBar.style.backgroundColor = getProgressBarColor(skuPercentage);

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå MU
                let muPercentage = 0;
                if (targetMuNum > 0) {
                    muPercentage = Math.min(100, (currentMu / targetMuNum) * 100);
                }
                muProgressBar.style.width = muPercentage + '%';
                muProgressBar.textContent = muPercentage.toFixed(0) + '%';
                muProgressBar.style.backgroundColor = getProgressBarColor(muPercentage);

                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏•‡∏á Local Storage
                // ‡∏ñ‡πâ‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å) ‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô '0' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                localStorage.setItem('dailySku', currentSkuInput.value === '' ? '0' : currentSkuInput.value);
                localStorage.setItem('dailyMu', currentMuInput.value === '' ? '0' : currentMuInput.value);
            }

            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ ProgressBar
            function getProgressBarColor(percentage) {
                if (percentage >= 100) {
                    return '#28a745'; // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                } else if (percentage >= 75) {
                    return '#ffc107'; // ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á
                } else {
                    return '#007bff'; // ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏Å‡∏•
                }
            }

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            currentSkuInput.addEventListener('input', updateProgress);
            currentMuInput.addEventListener('input', updateProgress);

            // ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            clearDataButton.addEventListener('click', () => {
                currentSkuInput.value = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á
                currentMuInput.value = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á
                localStorage.removeItem('dailySku'); // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Local Storage
                localStorage.removeItem('dailyMu');
                updateProgress(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Progress Bar ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á placeholder
            });

            // Event Listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Floating Buttons
            document.getElementById("homeButton").addEventListener("click", () => {
                window.location.href = "index.html";
            });

            document.getElementById("duckButton").addEventListener("click", () => {
                window.location.href = "songs.html";
            });

            document.getElementById("fullscreenButton").addEventListener("click", () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch((err) => {
                        console.error(`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡πÑ‡∏î‡πâ: ${err.message}`);
                    });
                } else {
                    document.exitFullscreen();
                }
            });

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
            updateProgress();
        });
    </script>
</body>
</html>
