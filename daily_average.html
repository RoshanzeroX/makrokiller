<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏à‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background"></div>
    <div class="content-wrapper fade-slide-in">
        <main>
            <h1>üí∞ ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏à‡∏±‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h1>

            <div class="info-card">
                <h2>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h2>
                <p>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ SKU ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô: <span id="targetSku">0</span></p>
                <p>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ MU ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô: <span id="targetMu">0</span></p>
            </div>

            <div class="info-card">
                <h2>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
                <div class="input-group">
                    <input type="number" id="currentSku" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô SKU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß">
                </div>
                <div class="progress-bar-container">
                    <div id="skuProgressBar" class="progress-bar">0%</div>
                </div>

                <div class="input-group" style="margin-top: 1.5em;">
                    <input type="number" id="currentMu" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô MU ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß">
                </div>
                <div class="progress-bar-container">
                    <div id="muProgressBar" class="progress-bar">0%</div>
                </div>
            </div>

            <div class="buttons-group">
                <button id="clearDataButton" class="clear-button">üóëÔ∏è ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>
        </main>
    </div>

    <button id="homeButton" class="floating-button" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å">üè†</button>
    <button id="duckButton" class="floating-button" aria-label="‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏î">ü¶Ü</button>
    <button id="fullscreenButton" class="floating-button" aria-label="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠">üì±</button>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const urlParams = new URLSearchParams(window.location.search);
            const targetSku = parseFloat(urlParams.get('skuDaily')) || 0;
            const targetMu = parseFloat(urlParams.get('muDaily')) || 0;

            const targetSkuDisplay = document.getElementById('targetSku');
            const targetMuDisplay = document.getElementById('targetMu');
            const currentSkuInput = document.getElementById('currentSku');
            const currentMuInput = document.getElementById('currentMu');
            const skuProgressBar = document.getElementById('skuProgressBar');
            const muProgressBar = document.getElementById('muProgressBar');
            const clearDataButton = document.getElementById('clearDataButton');

            targetSkuDisplay.textContent = targetSku.toFixed(0);
            targetMuDisplay.textContent = targetMu.toFixed(0);

            // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Local Storage ‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ input
            const savedCurrentSku = localStorage.getItem('dailySku');
            const savedCurrentMu = localStorage.getItem('dailyMu');
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
            if (savedCurrentSku !== null) { // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö null ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ "" ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                currentSkuInput.value = savedCurrentSku;
            } else {
                currentSkuInput.value = ""; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ placeholder ‡πÅ‡∏™‡∏î‡∏á
            }

            if (savedCurrentMu !== null) { // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö null ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ "" ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                currentMuInput.value = savedCurrentMu;
            } else {
                currentMuInput.value = ""; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ placeholder ‡πÅ‡∏™‡∏î‡∏á
            }


            function updateProgress() {
                // ‡πÉ‡∏ä‡πâ parseFloat ‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô input ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
                const currentSku = parseFloat(currentSkuInput.value) || 0;
                const currentMu = parseFloat(currentMuInput.value) || 0;

                const targetSkuNum = targetSku;
                const targetMuNum = targetMu;

                let skuPercentage = 0;
                if (targetSkuNum > 0) {
                    skuPercentage = Math.min(100, (currentSku / targetSkuNum) * 100);
                }
                skuProgressBar.style.width = skuPercentage + '%';
                skuProgressBar.textContent = skuPercentage.toFixed(0) + '%';
                skuProgressBar.style.backgroundColor = getProgressBarColor(skuPercentage);

                let muPercentage = 0;
                if (targetMuNum > 0) {
                    muPercentage = Math.min(100, (currentMu / targetMuNum) * 100);
                }
                muProgressBar.style.width = muPercentage + '%';
                muProgressBar.textContent = muPercentage.toFixed(0) + '%';
                muProgressBar.style.backgroundColor = getProgressBarColor(muPercentage);

                localStorage.setItem('dailySku', currentSku);
                localStorage.setItem('dailyMu', currentMu);
            }

            function getProgressBarColor(percentage) {
                if (percentage >= 100) {
                    return '#28a745';
                } else if (percentage >= 75) {
                    return '#ffc107';
                } else {
                    return '#007bff';
                }
            }

            currentSkuInput.addEventListener('input', updateProgress);
            currentMuInput.addEventListener('input', updateProgress);

            clearDataButton.addEventListener('click', () => {
                currentSkuInput.value = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ placeholder ‡πÅ‡∏™‡∏î‡∏á
                currentMuInput.value = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ placeholder ‡πÅ‡∏™‡∏î‡∏á
                localStorage.removeItem('dailySku');
                localStorage.removeItem('dailyMu');
                updateProgress();
            });

            // Event Listeners for Floating Buttons
            document.getElementById("homeButton").addEventListener("click", () => {
                window.location.href = "index.html";
            });

            document.getElementById("duckButton").addEventListener("click", () => {
                window.location.href = "songs.html";
            });

            document.getElementById("fullscreenButton").addEventListener("click", () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch((err) => {
                        console.error(`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡πÑ‡∏î‡πâ: ${err.message}`);
                    });
                } else {
                    document.exitFullscreen();
                }
            });

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏î‡∏á placeholder
            updateProgress();
        });
    </script>
</body>
</html>
